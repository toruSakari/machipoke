# マチポケ コーディング規約

このドキュメントは、マチポケプロジェクトのコーディング規約とスタイルガイドを定義します。

## 一般的なガイドライン

- TypeScriptを使用し、適切な型付けを行う
- コードの可読性と保守性を重視する
- 一貫性のあるコーディングスタイルを維持する
- ドキュメンテーションコメントを積極的に追加する
- テストコードを書く
- コミットメッセージは明確で具体的に

## TypeScriptのコーディング規約

### ファイル名・ディレクトリ名

- ファイル名はkebab-case（ハイフン区切り）を使用: `spot-detail.tsx`
- テストファイルは `.test.ts` または `.spec.ts` のサフィックスを使用
- 型定義ファイルは `.d.ts` または `.types.ts` を使用

### 命名規則

- **変数/関数**: camelCase
- **クラス/インターフェース/型**: PascalCase
- **定数**: 大文字のSNAKE_CASE
- **Reactコンポーネント**: PascalCase
- **ファイル内エクスポート**: 名前付きエクスポートを優先
- **コンポーネントファイル**: エクスポートする主要コンポーネントと同名にする

### インデント・フォーマット

- 2スペースのインデント
- セミコロンを使用
- 単一引用符（'）を使用
- 最大行長は100文字
- 末尾のカンマを使用

### 型の使用

- `any`型の使用を避ける
- 明示的な戻り値の型を指定する
- ジェネリックを適切に活用する
- インターフェースとタイプエイリアスを適切に使い分ける
- 複雑なオブジェクトには型を定義する

## Reactのコーディング規約

### コンポーネント構造

- 関数コンポーネントを使用する
- コンポーネントは小さく保ち、単一責任の原則に従う
- propsにはインターフェースを定義する
- 必須propsと任意propsを明確に区別する
- 再利用可能なロジックにはカスタムフックを使用する

### フォルダ構造

- コンポーネントは機能またはドメイン別に整理する
- 共通コンポーネントは `components` ディレクトリに配置
- ページコンポーネントは `routes` ディレクトリに配置

### スタイリング

- Tailwind CSSクラスを使用
- 複雑なスタイルは別のCSSモジュールファイルに分ける
- クラス名は機能を表す名前にする

## バックエンドのコーディング規約

### APIエンドポイント

- RESTful原則に従う
- エンドポイントは小文字、複数形、ケバブケースを使用
- GraphQLのフィールド名はcamelCaseを使用

### ビジネスロジック

- ドメイン駆動設計（DDD）の原則に従う
- ビジネスロジックはドメインレイヤーに集中させる
- リポジトリパターンを使用してデータアクセスを抽象化する

### エラー処理

- 例外よりも結果オブジェクト（Result型）を使用する
- エラーメッセージは明確で具体的に
- エラーはログに記録し、デバッグ情報を含める

## テスト規約

- 単体テスト、統合テスト、E2Eテストを適切に使い分ける
- テストは読みやすく、保守しやすくする
- テスト対象と同様のディレクトリ構造に合わせる
- モック/スタブを適切に使用する

## Git規約

### ブランチ戦略

- main: 本番リリース用ブランチ
- develop: 開発統合ブランチ
- feature/*: 機能開発ブランチ
- bugfix/*: バグ修正ブランチ
- release/*: リリース準備ブランチ

### コミットメッセージ

コミットメッセージは以下の形式に従う：

```
<type>(<scope>): <subject>

<body>

<footer>
```

**タイプ**: 
- feat: 新機能
- fix: バグ修正
- docs: ドキュメントのみの変更
- style: コードの意味に影響しない変更（フォーマットなど）
- refactor: リファクタリング
- test: テストの追加・修正
- chore: ビルドプロセスやツールの変更

**例**:
```
feat(spot): スポット詳細ページの追加

- スポット情報の表示機能を実装
- 地図上での位置表示を追加
- 関連スポットのリストを追加

Closes #123
```

## コードレビュー

- すべてのコード変更はレビューを受ける
- レビューコメントは建設的かつ具体的に
- 重大な問題がない場合は速やかに承認する
- 複雑な変更は小さな単位に分割する

## ツールと自動化

- ESLintとPrettierを使用してコードスタイルを統一
- TypeScriptの厳格なチェックを有効にする
- CIパイプラインでリント、テスト、ビルドを自動化
- Husky pre-commitフックを使用して、コミット前にチェックを実行

## まとめ

これらの規約に従うことで、コードの品質と一貫性を維持し、開発者間のコラボレーションをスムーズにすることを目指します。
